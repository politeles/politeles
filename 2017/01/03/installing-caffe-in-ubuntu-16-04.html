<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Installing caffe in Ubuntu 16.04</h1><p class="page-description">Guide to install Caffe in ubuntu</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2017-01-03T00:00:00-06:00" itemprop="datePublished">
        Jan 3, 2017
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#linux ubuntu">linux ubuntu</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
</ul><p><a href="http://caffe.berkeleyvision.org">Caffe</a> is a library used in deep learning and specific to computer vision.
They provide an installation guide, which is quite nice. But I experienced problems during the install.
You can <a href="https://github.com/BVLC/caffe">download the source code here</a></p>

<p>First follow the <a href="http://caffe.berkeleyvision.org/installation.html">installation instructions</a>.</p>

<p>I had installed cuda 8 library directly from Nvidia and not from ubuntu default repos.</p>

<p>Then install the following packages:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">--no-install-recommends</span> libboost-all-dev
</code></pre></div></div>

<p>And the BLAS library of your choice, I selected by default ATLAS:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>libatlas-base-dev
</code></pre></div></div>

<p>As I’m going to work with python, I prepared a virtual environment. This is also because I work with tensorflow and I don’t want to mix both.
Assuming you <a href="https://virtualenv.pypa.io/en/stable/">have installed virtualenv</a>:</p>

<div class="language-ssh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">virtualenv</span> caffe_gpu
<span class="k">source</span> ~/caffe_gpu/bin/activate
</code></pre></div></div>

<p>Assuming your code is in ~/caffe:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>python
<span class="k">for </span>req <span class="k">in</span> <span class="si">$(</span><span class="nb">cat </span>requirements.txt<span class="si">)</span><span class="p">;</span> <span class="k">do </span>pip <span class="nb">install</span> <span class="nv">$req</span><span class="p">;</span> <span class="k">done</span>
</code></pre></div></div>

<p>Then, I had to adapt the make file:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>Makefile.config.example Makefile.config
</code></pre></div></div>

<p>adjust:</p>
<pre><code class="language-init">USE_CUDNN := 1
INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/
LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /usr/lib/x86_64-linux-gnu/hdf5/serial/
</code></pre>
<p>finally do a symbolic link:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/lib/x86_64-linux-gnu/libhdf5_serial_hl.so /usr/lib/x86_64-linux-gnu/libhdf5_hl.so
<span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/lib/x86_64-linux-gnu/libhdf5_serial.so /usr/lib/x86_64-linux-gnu/libhdf5.so
</code></pre></div></div>

<p>Now we can compile as in the instructions:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make all
make <span class="nb">test
</span>make runtest
</code></pre></div></div>

<p>Thanks for reading!</p>


  </div><a class="u-url" href="/2017/01/03/installing-caffe-in-ubuntu-16-04" hidden></a>
</article>
