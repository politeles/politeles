<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Index database using tipuesearch</h1><p class="page-description">Indexing a small document database using Tipue Search a small js library.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2015-06-08T00:00:00-05:00" itemprop="datePublished">
        Jun 8, 2015
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#search database javascript">search database javascript</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#optimizing-search-on-websites-with-tipuesearch-js">Optimizing search on websites with tipuesearch js</a></li>
<li class="toc-entry toc-h1"><a href="#creation-of-the-index-database-using-python">Creation of the index database using python</a></li>
<li class="toc-entry toc-h1"><a href="#resources">Resources</a></li>
</ul><h1 id="optimizing-search-on-websites-with-tipuesearch-js">
<a class="anchor" href="#optimizing-search-on-websites-with-tipuesearch-js" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optimizing search on websites with tipuesearch js</h1>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">tipuesearch</span> <span class="o">=</span> <span class="p">{</span><span class="dl">"</span><span class="s2">pages</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
<span class="p">{</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Welcome to JIVE - Guidelines | ACME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Welcome to the ACME Jive Collaboration platform Please read this document, which contains</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Welcome to JIVE - Guidelines | ACME</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://10.0.82.13/DOC-1001.html</span><span class="dl">"</span><span class="p">},</span>
<span class="p">{</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Datacenter FAQ - ACME ISO Hosting | ACME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Where are the datacenters located? Do you subcontract activities? We have several datacenters around</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Datacenter FAQ - ACME ISO Hosting | ACME</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://10.0.82.13/DOC-1002.html</span><span class="dl">"</span><span class="p">},</span>
<span class="p">{</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Customer Information template | ACME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This document will need to become the template that is used to create the information of the custome</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Customer Information template | ACME</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://10.0.82.13/DOC-1003.html</span><span class="dl">"</span><span class="p">},</span>
<span class="p">{</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ISO Customer List | ACME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Please add customers as content is created. Please ensure you add the name alphabetically. Insert fo</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ISO Customer List | ACME</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://10.0.82.13/DOC-1004.html</span><span class="dl">"</span><span class="p">},</span>
<span class="p">{</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Accenture Phillipines/SiACMEpore - APH - Hosted | ACME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">CustomerAccenture Philippines/SiACMEporealso known asAPHISO Project CodeAPHContract Start date01 June</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Accenture Phillipines/SiACMEpore - APH - Hosted | ACME</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://10.0.82.13/DOC-1006.html</span><span class="dl">"</span><span class="p">},</span>
<span class="p">{</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">KB: SAP logon screen hangs - Oracle | ACME</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">KeywordsORA 257 00257 ORA-00257 Archivelog system hangs logon login screenSymptomSAP logon screen ap</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">KB: SAP logon screen hangs - Oracle | ACME</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://10.0.82.13/DOC-1007.html</span><span class="dl">"</span><span class="p">},</span>
<span class="p">]};</span>
</code></pre></div></div>

<h1 id="creation-of-the-index-database-using-python">
<a class="anchor" href="#creation-of-the-index-database-using-python" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creation of the index database using python</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">urllib2.request</span>
<span class="kn">import</span> <span class="nn">glob</span><span class="p">,</span> <span class="n">os</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="c1">#os.chdir("D:\MergedCopies_17042015\jive.ACME.com\docs\DOC-1008.html")
</span>
<span class="k">def</span> <span class="nf">paquillo</span><span class="p">():</span>


    <span class="n">max_lenth</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">tag_start</span> <span class="o">=</span> <span class="mi">11</span>

    <span class="n">output_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'D:\Documentos\index.json'</span><span class="p">,</span><span class="s">'w+'</span><span class="p">)</span>
    

    <span class="n">os</span><span class="p">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">"D:\MergedCopies_17042015\jive.ACME.com\docs"</span><span class="p">)</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">"DOC-[0-9][0-9][0-9][0-9].html"</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Document: '</span><span class="o">+</span><span class="nb">file</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">codecs</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'.jive-rendered-content'</span><span class="p">))</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'.jive-rendered-content'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">text_lenth</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">.</span><span class="n">get_text</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">text_lenth</span><span class="o">&gt;=</span><span class="n">max_lenth</span><span class="p">:</span>
                <span class="n">content_text</span> <span class="o">=</span>  <span class="n">text</span><span class="p">.</span><span class="n">get_text</span><span class="p">()[:</span><span class="n">max_lenth</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">text_lenth</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">content_text</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">string</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">content_text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">get_text</span><span class="p">()</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">content_text</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">string</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'.jive-icon-med .jive-icon-folder'</span><span class="p">))</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">select</span><span class="p">(</span><span class="s">'.jive-icon-med .jive-icon-folder'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tag_lenth</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tags</span><span class="p">.</span><span class="n">get_text</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">tag_lenth</span> <span class="o">&gt;</span> <span class="n">tag_start</span><span class="p">:</span>
                <span class="n">tag_text</span> <span class="o">=</span> <span class="n">tags</span><span class="p">[:</span><span class="o">-</span><span class="n">tag_start</span><span class="p">]</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">tag_text</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">string</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">tag_text</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">string</span>

                    
                
        <span class="n">string_to_file</span> <span class="o">=</span>  <span class="p">(</span><span class="s">'{</span><span class="se">\"</span><span class="s">title</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">'</span><span class="o">+</span><span class="n">string</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">string</span><span class="p">,</span><span class="s">'</span><span class="se">\"</span><span class="s">'</span><span class="p">,</span><span class="s">''</span><span class="p">).</span><span class="n">strip</span><span class="p">()</span><span class="o">+</span><span class="s">'</span><span class="se">\"</span><span class="s">, </span><span class="se">\"</span><span class="s">text</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">'</span><span class="o">+</span>
              <span class="n">string</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">content_text</span><span class="p">,</span><span class="s">'</span><span class="se">\"</span><span class="s">'</span><span class="p">,</span><span class="s">''</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span><span class="s">''</span><span class="p">).</span><span class="n">strip</span><span class="p">()</span><span class="o">+</span><span class="s">'</span><span class="se">\"</span><span class="s">,'</span><span class="o">+</span>
              <span class="s">'</span><span class="se">\"</span><span class="s">tags</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">'</span><span class="o">+</span><span class="n">string</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tag_text</span><span class="p">,</span><span class="s">'</span><span class="se">\"</span><span class="s">'</span><span class="p">,</span><span class="s">''</span><span class="p">).</span><span class="n">strip</span><span class="p">()</span><span class="o">+</span><span class="s">'</span><span class="se">\"</span><span class="s">,'</span><span class="o">+</span>
              <span class="s">'</span><span class="se">\"</span><span class="s">url</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">'</span> <span class="o">+</span>  <span class="s">'http://10.0.82.13/'</span> <span class="o">+</span> <span class="nb">file</span> <span class="o">+</span><span class="s">'</span><span class="se">\"</span><span class="s">},'</span><span class="p">).</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span><span class="o">+</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span>           
        <span class="n">output_file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">string_to_file</span><span class="p">)</span>

    <span class="n">output_file</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
   <span class="c1"># sys.setdefaultencoding('utf-8')
</span>    <span class="c1">#reload(sys)
</span>    <span class="n">paquillo</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<h1 id="resources">
<a class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h1>
<p><a href="http://www.tipue.com/search/">tipue search</a></p>

  </div><a class="u-url" href="/2015/06/08/index_database" hidden></a>
</article>
