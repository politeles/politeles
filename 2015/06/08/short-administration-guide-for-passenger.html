<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Short Administration guide for passenger</h1><p class="page-description">A quick guide on admin Phusion Passenger, a web sever for Ruby, Python and more!</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2015-06-08T00:00:00-05:00" itemprop="datePublished">
        Jun 8, 2015
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#server passenger linux sysadmin">server passenger linux sysadmin</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
</ul><p>Hi, I’m working on several projects with Phusion Passenger software.
The administration is not really well documented and also is not so powerful.</p>

<p>There are some tools to analyze the memory usage like passenger-memory-stats.
In my system the output is something like:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passenger-memory-stats
Version: 4.0.59
Date   : 2015-05-12 16:07:11 +0200
<span class="nt">-------------</span> Apache processes <span class="nt">-------------</span>
<span class="k">***</span> WARNING: The Apache executable cannot be found.
Please <span class="nb">set </span>the APXS2 environment variable to your <span class="s1">'apxs2'</span> executable<span class="s1">'s filename,                                                              or set the HTTPD environment variable to your '</span>httpd<span class="s1">' or '</span>apache2<span class="s1">' executable'</span>s                                                              filename.


<span class="nt">----------</span> Nginx processes <span class="nt">----------</span>
PID    PPID   VMSize   Private  Name
<span class="nt">-------------------------------------</span>
20463  1      24.3 MB  ?        nginx: master process /usr/sbin/nginx <span class="nt">-c</span> /etc/ng                                                             inx/nginx.conf
26826  20463  30.5 MB  ?        nginx: worker process
<span class="c">### Processes: 2</span>
<span class="c">### Total private dirty RSS: 0.00 MB (?)</span>


<span class="nt">------</span> Passenger processes <span class="nt">-------</span>
PID    VMSize     Private    Name
<span class="nt">----------------------------------</span>
12284  83.5 MB    0.3 MB     PassengerWatchdog
12287  117.9 MB   1.1 MB     PassengerHelperAgent
12292  26.7 MB    0.5 MB     PassengerLoggingAgent
12302  26.0 MB    0.2 MB     PassengerWebHelper: master process /home/project                                                            1/.passenger-enterprise/standalone/4.0.59/webhelper-1.6.2-x86_64-linux/Passenger                                                             WebHelper <span class="nt">-c</span> /tmp/passenger-standalone.1r1zr19/config <span class="nt">-p</span> /tmp/passenger-standalo                                                             ne.1r1zr19/

15170  26.4 MB    0.6 MB     PassengerWebHelper: worker process
16390  504.5 MB   230.2 MB   Passenger RackApp: /home/myproject/curren                                                      
16676  438.2 MB   260.4 MB   Passenger RackApp: /home/test/curren                                                            
                                                          
<span class="c">### Processes: 95</span>
<span class="c">### Total private dirty RSS: 8074.19 MB</span>
<span class="k">***</span> WARNING: Please run this tool with sudo. Otherwise the private dirty RSS <span class="o">(</span>a                                                              reliable metric <span class="k">for </span>real memory usage<span class="o">)</span> of processes cannot be determined.
</code></pre></div></div>

<p>The other tool for the administration is passenger-status:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passenger-status
It appears that multiple Passenger instances are running. Please <span class="k">select </span>a specific one by running:

  passenger-status &lt;PID&gt;

The following Passenger instances are running:
  PID: 12494
  PID: 14656
  PID: 12302
  PID: 15169
  PID: 13833
  PID: 15000
  PID: 13441
  PID: 12370
  PID: 12896
  PID: 12656
  PID: 14192
  PID: 14018
  PID: 13672
  PID: 13614
  PID: 14395
  PID: 12438
</code></pre></div></div>
<p>Once you select the passenger process, you can dig in deeper:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passenger-status 12494 <span class="nt">--verbose</span>
Version : 4.0.59
Date    : 2015-05-12 16:15:21 +0200
Instance: 12494
<span class="nt">-----------</span> General information <span class="nt">-----------</span>
Max pool size : 3
Processes     : 1
Requests <span class="k">in </span>top-level queue : 0

<span class="nt">-----------</span> Application <span class="nb">groups</span> <span class="nt">-----------</span>
/homeproject/current#default:
  App root: /home/myproject/current
  Requests <span class="k">in </span>queue: 0
  <span class="k">*</span> PID: 17563   Sessions: 0       Processed: 30      Uptime: 4h 0m 31s
    CPU: 0%      Memory  : 235M    Last used: 19m 10s a
    URL     : http://127.0.0.1:53765
    Password: DTwE2g0zvvELqdDyviXrzi3FvNADc0PVc1l03TX084R

localhost:~&amp;gt<span class="p">;</span> curl <span class="nt">-H</span> <span class="s2">"X-Passenger-Connect-Password: DTwE2g0zvvELqdDyviXrzi3FvNADc0PVc1l03TX084R"</span> http://127.0.0.1:53765
</code></pre></div></div>

<p>you can connect to the administration console, via curl. If you don’t get any answer, that means that your server is frozen. If you want to see a trace in the logs, you need to kill it sending one of those signals: SIGQUIT, SIGTERM.</p>

<p>You can find more information about this on the following sites:</p>

<p>https://www.phusionpassenger.com/documentation/Users%20guide%20Apache.html: On Point 9: 9. Analysis and system maintenance</p>

<p><a href="http://en.wikipedia.org/wiki/URI_scheme">URL scheme</a></p>

<p><a href="https://www.phusionpassenger.com/documentation/ServerOptimizationGuide.html">Passenger optimization guide:</a></p>


  </div><a class="u-url" href="/2015/06/08/short-administration-guide-for-passenger" hidden></a>
</article>
