<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">How to create and modify admin users in Mongo DB</h1><p class="page-description">Commands for user creation in MongoDB</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2015-05-06T00:00:00-05:00" itemprop="datePublished">
        May 6, 2015
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      1 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/categories/#mongoDB databases">mongoDB databases</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
</ul><p>Today’s post is related to some repetitive administrative tasks related to database administration like the setup of a user and grant some permissions on Mongo db. I will perform all activities on<a href="http://docs.mongodb.org/manual/reference/mongo-shell/" target="_blank"> the Javascript shell for Mongo.</a></p>

<p>First of all, it’s important to know whether mongo server is running or not. In windows, you may run it as a <a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-windows/#begin-using-mongodb">service</a>. But in this case, I’ll run it in foreground:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:<span class="se">\U</span>sers<span class="se">\J</span>oseEnriqueP&gt;mongod <span class="nt">--dbpath</span> <span class="nb">.</span>
2015-05-06T23:05:03.205+0200
2015-05-06T23:05:03.222+0200 warning: 32-bit servers don<span class="s1">'t have journaling enabled by default. Please use --journal if you want durability.&lt;/pre&gt; 
</span></code></pre></div></div>

<p>Connect to mongo in the usual way and start it up:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:<span class="se">\U</span>sers<span class="se">\J</span>oseEnriqueP&amp;gt<span class="p">;</span>mongo
MongoDB shell version: 2.6.5
connecting to: <span class="nb">test</span>
</code></pre></div></div>

<p>Change to use the administration database and create an administration user.</p>

<p>In this link you will see how to <a href="http://docs.mongodb.org/manual/tutorial/add-user-administrator/create">create an admin user in Mongo DB</a> and also how to <a href="http://docs.mongodb.org/manual/administration/security-user-role-management">manage roles and user profiles in mongo</a>.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span>use admin<span class="p">;</span>
switched to db admin
 db.createUser<span class="o">(</span>
   <span class="o">{</span>
 	user: <span class="s2">"admin"</span>,
 	<span class="nb">pwd</span>: <span class="s2">"yourPasswordHere"</span>,
 	roles:
 	<span class="o">[</span>
   	<span class="o">{</span>
     	role: <span class="s2">"dbOwner"</span>,
     	db: <span class="s2">"admin"</span>
   	<span class="o">}</span>
 	<span class="o">]</span>
   <span class="o">}</span>
 <span class="o">)</span>
</code></pre></div></div>

<p>Note that the user is now the owner of that db. You will get a confirmation that the user was created successfully:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Successfully added user: <span class="o">{</span>
        <span class="s2">"user"</span> : <span class="s2">"admin"</span>,
        <span class="s2">"roles"</span> : <span class="o">[</span>
                <span class="o">{</span>
                        <span class="s2">"role"</span> : <span class="s2">"dbOwner"</span>,
                        <span class="s2">"db"</span> : <span class="s2">"admin"</span>
                <span class="o">}</span>
        <span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p><a href="http://docs.mongodb.org/manual/reference/security/">In this link</a> you have a complete reference for all users related operations that can be done on Mongo DB.</p>

<p>To change the password of a given user in Mongo DB you need an administrative user. After that, you log into the database and change the password in the following way:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span>db.changeUserPassword<span class="o">(</span><span class="s1">'user'</span>,<span class="s1">'newpassword'</span><span class="o">)</span><span class="p">;</span>
</code></pre></div></div>

<p>You won’t get any notification that the password was changed, but try to log with the new password and you should get a ‘1’:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span>db.auth<span class="o">(</span><span class="s1">'admin'</span>,<span class="s1">'newpass'</span><span class="o">)</span><span class="p">;</span>
1
</code></pre></div></div>

  </div><a class="u-url" href="/2015/05/06/how-to-create-and-modify-admin-users-in-mongo-db" hidden></a>
</article>
